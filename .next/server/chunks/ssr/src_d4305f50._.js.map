{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/projects/nutri-mind/src/stores/services/streamApi.tsx"],"sourcesContent":["export async function streamChat(\r\n  prompt: string,\r\n  onMessage: (chunk: string) => void\r\n) {\r\n  const response = await fetch(\r\n    \"https://openrouter.ai/api/v1/chat/completions\",\r\n    {\r\n      method: \"POST\",\r\n      headers: {\r\n        Authorization: `Bearer ${process.env.NEXT_PUBLIC_OPENROUTER_API_KEY}`,\r\n        \"Content-Type\": \"application/json\",\r\n        \"HTTP-Referer\": \"http://localhost:5174\",\r\n        \"X-Title\": \"Stramechat\",\r\n      },\r\n      body: JSON.stringify({\r\n        model: \"mistralai/mistral-7b-instruct\",\r\n        messages: [{ role: \"user\", content: prompt }],\r\n        stream: true,\r\n      }),\r\n    }\r\n  );\r\n\r\n  if (!response.body) throw new Error(\"No response body\");\r\n\r\n  const reader = response.body.getReader();\r\n  const decoder = new TextDecoder(\"utf-8\");\r\n\r\n  while (true) {\r\n    const { value, done } = await reader.read();\r\n    if (done) break;\r\n\r\n    const chunk = decoder.decode(value, { stream: true });\r\n    const lines = chunk\r\n      .split(\"\\n\")\r\n      .filter((line) => line.trim().startsWith(\"data:\"));\r\n\r\n    for (const line of lines) {\r\n      const json = line.replace(\"data: \", \"\").trim();\r\n      if (json === \"[DONE]\") break;\r\n\r\n      try {\r\n        const parsed = JSON.parse(json);\r\n        const token = parsed?.choices?.[0]?.delta?.content;\r\n        if (token) {\r\n          onMessage(token);\r\n        }\r\n      } catch (e) {\r\n        console.error(\"Failed to parse chunk:\", json);\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;AAAO,eAAe,WACpB,MAAc,EACd,SAAkC;IAElC,MAAM,WAAW,MAAM,MACrB,iDACA;QACE,QAAQ;QACR,SAAS;YACP,eAAe,CAAC,OAAO,iHAA8C;YACrE,gBAAgB;YAChB,gBAAgB;YAChB,WAAW;QACb;QACA,MAAM,KAAK,SAAS,CAAC;YACnB,OAAO;YACP,UAAU;gBAAC;oBAAE,MAAM;oBAAQ,SAAS;gBAAO;aAAE;YAC7C,QAAQ;QACV;IACF;IAGF,IAAI,CAAC,SAAS,IAAI,EAAE,MAAM,IAAI,MAAM;IAEpC,MAAM,SAAS,SAAS,IAAI,CAAC,SAAS;IACtC,MAAM,UAAU,IAAI,YAAY;IAEhC,MAAO,KAAM;QACX,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,OAAO,IAAI;QACzC,IAAI,MAAM;QAEV,MAAM,QAAQ,QAAQ,MAAM,CAAC,OAAO;YAAE,QAAQ;QAAK;QACnD,MAAM,QAAQ,MACX,KAAK,CAAC,MACN,MAAM,CAAC,CAAC,OAAS,KAAK,IAAI,GAAG,UAAU,CAAC;QAE3C,KAAK,MAAM,QAAQ,MAAO;YACxB,MAAM,OAAO,KAAK,OAAO,CAAC,UAAU,IAAI,IAAI;YAC5C,IAAI,SAAS,UAAU;YAEvB,IAAI;gBACF,MAAM,SAAS,KAAK,KAAK,CAAC;gBAC1B,MAAM,QAAQ,QAAQ,SAAS,CAAC,EAAE,EAAE,OAAO;gBAC3C,IAAI,OAAO;oBACT,UAAU;gBACZ;YACF,EAAE,OAAO,GAAG;gBACV,QAAQ,KAAK,CAAC,0BAA0B;YAC1C;QACF;IACF;AACF","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/projects/nutri-mind/src/components/chatbot/index.tsx"],"sourcesContent":[" \"use client\";\r\n import { useState } from \"react\";\r\n import { streamChat } from \"../../stores/services/streamApi\";\r\n import { ArrowUp } from \"lucide-react\";\r\n import { motion } from \"framer-motion\";\r\n\r\n function delay(ms: number) {\r\n   return new Promise((resolve) => setTimeout(resolve, ms));\r\n }\r\n\r\n const ChatBot: React.FC = () => {\r\n   const [input, setInput] = useState<string>(\"\");\r\n   const [response, setResponse] = useState<string>(\"\");\r\n   const [isFetching, setIsFetching] = useState<boolean>(false);\r\n\r\n   const handleSend = async () => {\r\n     setResponse(\"\");\r\n     setIsFetching(true);\r\n     try {\r\n       await streamChat(input, async (chunk: string) => {\r\n         await delay(800);\r\n         setResponse((prev) => prev + chunk);\r\n       });\r\n     } finally {\r\n       setIsFetching(false);\r\n     }\r\n   };\r\n\r\n   return (\r\n     <motion.div\r\n       initial={{ opacity: 0, y: 40 }}\r\n       animate={{ opacity: 1, y: 0 }}\r\n       transition={{ duration: 0.5 }}\r\n       className=\"\"\r\n     >\r\n       <div style={{ whiteSpace: \"pre-wrap\", marginTop: \"1rem\" }}>\r\n         <p className=\"text-4xl p-2 font-bold text-green-700 text-center\">\r\n           welcome, user ... chat with AI\r\n         </p>\r\n         <p\r\n           className=\"h-[20rem] border-2 border-green-700 rounded-xl \r\n        text-left overflow-y-auto w-[50rem] z-[50] p-5 bg-green-200 text-2xl\"\r\n         >\r\n           <strong>AI:</strong>\r\n           {isFetching ? \"  thinking...\" : \"\"}\r\n           {response}\r\n         </p>\r\n       </div>\r\n       <div className=\"relative\">\r\n         <textarea\r\n           value={input}\r\n           onChange={(e) => setInput(e.target.value)}\r\n           rows={3}\r\n           placeholder=\"Talk to GPT...\"\r\n           className=\"border-2 border-green-700 resize-none rounded-xl w-[50rem] p-5 bg-green-200 text-2xl my-5 outline-none\"\r\n         />\r\n         <button\r\n           onClick={handleSend}\r\n           disabled={isFetching}\r\n           className=\"bg-green-600 p-2 absolute bottom-[29px] right-1 rounded-full text-gray-200 hover:bg-green-700 cursor-pointer\"\r\n         >\r\n           <ArrowUp />\r\n         </button>\r\n       </div>\r\n     </motion.div>\r\n   );\r\n };\r\n\r\n export default ChatBot;\r\n"],"names":[],"mappings":";;;;AACC;AACA;AACA;AACA;AAJA;;;;;;AAMA,SAAS,MAAM,EAAU;IACvB,OAAO,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;AACtD;AAEA,MAAM,UAAoB;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAC3C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IACjD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW;IAEtD,MAAM,aAAa;QACjB,YAAY;QACZ,cAAc;QACd,IAAI;YACF,MAAM,CAAA,GAAA,uIAAA,CAAA,aAAU,AAAD,EAAE,OAAO,OAAO;gBAC7B,MAAM,MAAM;gBACZ,YAAY,CAAC,OAAS,OAAO;YAC/B;QACF,SAAU;YACR,cAAc;QAChB;IACF;IAEA,qBACE,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;QACT,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,YAAY;YAAE,UAAU;QAAI;QAC5B,WAAU;;0BAEV,8OAAC;gBAAI,OAAO;oBAAE,YAAY;oBAAY,WAAW;gBAAO;;kCACtD,8OAAC;wBAAE,WAAU;kCAAoD;;;;;;kCAGjE,8OAAC;wBACC,WAAU;;0CAGV,8OAAC;0CAAO;;;;;;4BACP,aAAa,kBAAkB;4BAC/B;;;;;;;;;;;;;0BAGL,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACxC,MAAM;wBACN,aAAY;wBACZ,WAAU;;;;;;kCAEZ,8OAAC;wBACC,SAAS;wBACT,UAAU;wBACV,WAAU;kCAEV,cAAA,8OAAC,4MAAA,CAAA,UAAO;;;;;;;;;;;;;;;;;;;;;;AAKlB;uCAEe","debugId":null}}]
}